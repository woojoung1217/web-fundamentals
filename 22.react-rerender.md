# React 리렌더링 과정

## 리렌더링의 세 단계

### 1. Trigger (트리거)

- 컴포넌트의 state나 props가 변경되면서 시작
- 사용자 입력, 네트워크 응답 등의 이벤트에 의해 상태 변경
- React가 해당 컴포넌트를 다시 렌더링해야 한다고 판단
- 내부적으로 업데이트 큐에 변경 사항을 등록

### 2. Render (렌더)

- 변경된 상태를 바탕으로 새로운 Virtual DOM 트리 생성
- 이전 Virtual DOM과 새 Virtual DOM을 비교하여 변경 사항 분석
- **중요**: 이 시점에서는 실제 DOM에는 아무런 변경도 일어나지 않음

### 3. Commit (커밋)

- 분석된 변경 사항을 실제 DOM에 반영
- 변경에 필요한 최소한의 작업만 적용하여 DOM 업데이트
- 변경이 발생하지 않은 요소는 수정하지 않고 그대로 유지
- 사용자에게 화면의 변화가 실제로 나타나는 단계

## Auto Batching

### setState() 호출 시 리렌더링

**질문**: setState()가 호출될 때마다 매번 리렌더링이 발생하나요?

**답변**: 아니요. React의 auto batching 기능으로 인해, 여러 개의 상태 변경이 자동으로 하나의 batch로 묶여서 처리됩니다.

### 예시 코드

```javascript
function App() {
  const [a, setA] = useState(0);
  const [b, setB] = useState(0);

  const handleClick = () => {
    setA(a + 1);
    setB(b + 1); // 이 둘은 하나로 합쳐져서 리렌더 1번
  };

  return <button onClick={handleClick}>Click</button>;
}
```

## 핵심 포인트

- React는 성능 최적화를 위해 여러 상태 변경을 자동으로 배치 처리
- Virtual DOM을 통한 효율적인 변경 사항 추적
- 실제 DOM 조작은 최소화하여 성능 향상
